# Football Highlights Generator

An AI-driven system that automatically generates highlight reels from football videos using multiple detection methods:

- **üéØ Scoreboard Analysis**: OCR-based goal detection from visible scoreboards
- **üéµ Audio Analysis**: Crowd excitement detection with AI validation  
- **ü§ñ Hybrid Mode**: Combines both methods for maximum accuracy

## ‚ú® Features

- **Multiple Detection Modes**: Works on broadcast videos, fan recordings, or any football content
- **AI-Powered Validation**: Uses Gemini Vision to verify excitement moments
- **Smart Clip Merging**: Automatically combines overlapping highlights
- **Caching System**: Reduces API costs with intelligent response caching
- **Debug Tools**: Comprehensive analysis and visualization utilities

## üöÄ Quick Start

### Prerequisites

- Python 3.10+
- FFmpeg (for audio processing)
- Gemini API key (for audio/hybrid modes)

### Installation

```bash
# Clone the repository
git clone <repository-url>
cd Football-Highlights-

# Create virtual environment
python3 -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Set up your Gemini API key
export GEMINI_API_KEY="your-api-key-here"
```

### Basic Usage

Generate highlights using the recommended hybrid mode:

```bash
python gen_highlights.py --video your_match.mp4 --mode hybrid --output highlights.mp4
```

## üìã Usage Examples

### Hybrid Mode (Recommended)
Combines scoreboard detection and audio analysis for best results:
```bash
python gen_highlights.py --video match.mp4 --mode hybrid --output highlights.mp4
```

### Audio-Only Mode  
Perfect for fan recordings, phone videos, or content without visible scoreboards:
```bash
python gen_highlights.py --video fan_cam.mov --mode audio --output fan_highlights.mp4
```

### Scoreboard-Only Mode
Traditional method for broadcast videos with clear scoreboards:
```bash
python gen_highlights.py --video broadcast.mp4 --mode scoreboard --output broadcast_highlights.mp4
```

### Debug Mode
Get detailed logging and analysis information:
```bash
python gen_highlights.py --video match.mp4 --mode hybrid --debug
```

## üõ†Ô∏è Debug Tools

### Audio Analysis Visualization
Visualize audio peaks and detection parameters:
```bash
python tools/extract_audio.py your_video.mp4
```

### Configuration Validation
Test your configuration settings:
```bash
python config.py
```

## üîß Configuration

Key parameters in `config.py`:

- **Audio Analysis**: Peak sensitivity, frequency bands, minimum distances
- **Gemini API**: Model selection, confidence thresholds, retry logic  
- **Video Processing**: Clip durations, overlap handling, output quality

## üß™ Testing

Run the test suite:
```bash
pytest tests/ -v --asyncio-mode=auto
```

## üìä Output

The system generates:
- **Highlight video**: Concatenated clips of exciting moments
- **JSON summary**: Detailed analysis with timestamps and confidence scores
- **Debug visualizations**: Audio analysis plots and peak detection graphs

## üé• Example Output

Check out sample highlights generated by the system:

[**Highlights Video**](https://drive.google.com/file/d/1m3EGMyUgw4IH3I8AUxOHOJzoMRxoJSGH/view?usp=sharing)

[![Sample Highlights](http://img.youtube.com/vi/CA3S5--3Msg/0.jpg)](https://drive.google.com/drive/folders/1NimTcL4qJ4l9thiXKPYZVuykCTzbHM1H)

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Run tests (`pytest`)
4. Commit changes (`git commit -m 'Add amazing feature'`)
5. Push to branch (`git push origin feature/amazing-feature`)
6. Open a Pull Request

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
